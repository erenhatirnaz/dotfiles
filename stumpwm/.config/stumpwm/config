;; -*-lisp-*-
(in-package :stumpwm)

(set-module-dir "/home/erenhatirnaz/stumpwm/contrib")
(ql:quickload :clx-truetype)
(load-module "ttf-fonts")

(set-focus-color "#b45741")

;; Set `mode-line' colors and toggle toggle `mode-line' for current screen (monitor).
(setf *mode-line-foreground-color* "#b45741"
			*mode-line-background-color* "#272531"
			*screen-mode-line-format* "[^B%n^b] %W ^>^n[%d]")
(toggle-mode-line (current-screen) (current-head))

;; xterm -> x-terminal-emulator
(undefine-key *root-map* (kbd "c"))
(undefine-key *root-map* (kbd "C-c"))
(define-key *root-map* (kbd "c") "exec x-terminal-emulator")
(define-key *root-map* (kbd "C-c") "exec x-terminal-emulator")

;; Open new emacs instance instead of raise
(undefine-key *root-map* (kbd "e"))
(undefine-key *root-map* (kbd "C-e"))
(define-key *root-map* (kbd "e") "exec emacs")
(define-key *root-map* (kbd "C-e") "exec emacs")

;; C-t B for show remaning percentage of the battery
(defcommand battery-percentage ()
	()
	(setf bat-perc (stumpwm:run-shell-command "upower -i /org/freedesktop/UPower/devices/battery_BAT1 | grep percentage | cut -d: -f2 | tr -d '[:space:]'" t))
	(message  "Battery Percentage: ~a" bat-perc))
(define-key *root-map* (kbd "B") "battery-percentage")
;; C-t C-g f for create new float group
(define-key *groups-map* (kbd "f") "gnew-float")

;; Implement `launch-map' for launch some common used applications. C-t L
(defvar *launch-top-map* nil)
(defvar *launch-root-map* nil)
(defvar *launch-map* nil)

(defcommand other-program () () (run-shell-command "rofi -show drun"))

(fill-keymap *launch-map*
						 (kbd "f") "exec firefox"
						 (kbd "q") "exec qutebrowser"
						 (kbd "t") "exec thunderbird"
						 (kbd "n") "exec nautilus"
						 (kbd "T") "exec telegram-desktop"
						 (kbd "g") "exec gimp"
						 (kbd "s") "exec spotify"
						 (kbd "o") "other-program")

(define-key *root-map* (kbd "L") '*launch-map*)
